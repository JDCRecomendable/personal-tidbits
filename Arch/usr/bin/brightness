#!/usr/bin/python3

# -*- coding: utf-8 -*-

# Copyright (c) 2018 Jared Daniel Carbonell Recomendable. All rights reserved.

import sys
import subprocess

invalid_resp = '\nYou have entered an invalid response.\nExiting...\n'
com = 'tee /sys/class/backlight/acpi_video0/brightness <<< {}'

def run(has_input, level=7):
    """Carry out the process of changing the brightness of the display."""
    if has_input:
        to_run = com.format(level)
        subprocess.run(['bash', '-c', to_run])
    else:
        temp_level = input('Brightness Level [0-7, Default: 7]: ')
        if temp_level == '':
            run(True)
        elif temp_level.isnumeric():
            if 0 <= int(temp_level) < 8:
                run(True, temp_level)
            else:
                sys.exit(invalid_resp)
        else:
            sys.exit(invalid_resp)

def show_help():
    """Show the help documentation for the program."""
    help_doc = '''Usage: brightness [level]

Level:
  0 - lowest
  1
  2
  3
  4
  5
  6
  7 - highest'''
    print(help_doc)

if __name__ == '__main__':
    if len(sys.argv) == 1:
        run(False)
    elif len(sys.argv) == 2:
        if sys.argv[1] in ('0','1','2','3','4','5','6','7'):
            level = sys.argv[1]
            run(True, level)
        else:
            show_help()
    else:
        show_help()
